# Ryvos Configuration

[agent]
max_turns = 25
max_duration_secs = 600
workspace = "~/.ryvos"

# Guardian watchdog — detects doom loops, stalls, and token budget overruns
# [agent.guardian]
# enabled = true
# doom_loop_threshold = 3       # identical tool calls to trigger
# stall_timeout_secs = 120      # seconds without progress
# token_budget = 0              # 0 = unlimited
# token_warn_pct = 80           # soft warning at this %

[model]
# Provider: "anthropic", "openai", "gemini", "azure", "cohere", "ollama",
#   "groq", "openrouter", "together", "fireworks", "cerebras", "xai",
#   "mistral", "perplexity", "deepseek", or any OpenAI-compatible API
provider = "anthropic"
model_id = "claude-sonnet-4-20250514"
api_key = "${ANTHROPIC_API_KEY}"
max_tokens = 8192
# temperature = 0.0

# Uncomment for OpenAI:
# provider = "openai"
# model_id = "gpt-4o"
# api_key = "${OPENAI_API_KEY}"

# Uncomment for Ollama (local, no key needed):
# provider = "ollama"
# model_id = "llama3.2"

# Uncomment for Google Gemini (native API):
# provider = "gemini"
# model_id = "gemini-2.0-flash"
# api_key = "${GEMINI_API_KEY}"

# Uncomment for Azure OpenAI:
# provider = "azure"
# model_id = "gpt-4o"
# api_key = "${AZURE_OPENAI_API_KEY}"
# azure_resource = "my-resource"
# azure_deployment = "my-deployment"
# azure_api_version = "2024-06-01"

# Uncomment for Groq:
# provider = "groq"
# model_id = "llama-3.3-70b-versatile"
# api_key = "${GROQ_API_KEY}"

# Uncomment for DeepSeek:
# provider = "deepseek"
# model_id = "deepseek-chat"
# api_key = "${DEEPSEEK_API_KEY}"

# Per-agent model routing overrides
# [agent.model_overrides.sub-researcher]
# provider = "groq"
# model_id = "llama-3.3-70b-versatile"
# api_key = "${GROQ_API_KEY}"

# [gateway]
# bind = "127.0.0.1:18789"
# token = "${RYVOS_GATEWAY_TOKEN}"
# password = "my-secret-password"   # Alternative to token auth

# Named API keys for gateway auth (Bearer token)
# [[gateway.api_keys]]
# name = "web-ui"
# key = "rk_..."
# role = "operator"    # viewer | operator | admin

# [channels.telegram]
# bot_token = "${TELEGRAM_BOT_TOKEN}"
# dm_policy = "allowlist"           # allowlist | open | disabled
# allowed_users = [123456789]

# [channels.discord]
# bot_token = "${DISCORD_BOT_TOKEN}"
# dm_policy = "allowlist"           # allowlist | open | disabled
# allowed_users = [123456789012345678]

# [channels.slack]
# bot_token = "${SLACK_BOT_TOKEN}"
# app_token = "${SLACK_APP_TOKEN}"
# dm_policy = "allowlist"           # allowlist | open | disabled
# allowed_users = ["U01234ABC"]

# Heartbeat — periodic proactive agent checks
# [heartbeat]
# enabled = true
# interval_secs = 1800                # 30 minutes
# target_channel = "telegram"         # Route alerts to a channel (omit to broadcast)
# ack_max_chars = 300                 # Max response length to treat as ack
# heartbeat_file = "HEARTBEAT.md"     # Workspace file for check context
# prompt = "Review workspace. Respond with HEARTBEAT_OK if fine."
#
# [heartbeat.active_hours]
# start_hour = 9                      # Only fire between 09:00 and 22:00
# end_hour = 22
# utc_offset_hours = 0                # Simple timezone offset

# Lifecycle hooks — shell commands fired on events
# [hooks]
# on_start = ["notify-send 'Ryvos started'"]
# on_message = ["logger -t ryvos 'Received: $RYVOS_TEXT'"]
# on_tool_call = ["logger -t ryvos 'Tool: $RYVOS_TOOL'"]
# on_response = ["logger -t ryvos 'Response sent'"]

# MCP (Model Context Protocol) servers
# [mcp.servers.filesystem]
# transport = { type = "stdio", command = "npx", args = ["-y", "@modelcontextprotocol/server-filesystem", "/tmp"] }
# auto_connect = true

# [mcp.servers.github]
# transport = { type = "stdio", command = "npx", args = ["-y", "@modelcontextprotocol/server-github"] }
# auto_connect = true

# [mcp.servers.remote]
# transport = { type = "sse", url = "http://localhost:3001/sse" }
# auto_connect = false

# Daily append-only logs
# [daily_logs]
# enabled = true
# retention_days = 30            # Auto-prune logs older than this
# log_dir = "~/.ryvos/memory"   # Default location

# Skill registry
# [registry]
# url = "https://raw.githubusercontent.com/Ryvos/registry/main/index.json"
# cache_dir = "~/.ryvos/cache/registry"

# Webhooks — receive prompts from external services
# [gateway.webhooks]
# enabled = true
# token = "${RYVOS_WEBHOOK_TOKEN}"   # Bearer token for authentication

# Cron — scheduled recurring tasks
# [[cron.jobs]]
# name = "daily-review"
# schedule = "0 9 * * *"
# prompt = "Review today's calendar and summarize upcoming deadlines."
# channel = "telegram"

# Memory flush — persist important info before context compaction
# [agent]
# disable_memory_flush = false    # Set to true to opt out
